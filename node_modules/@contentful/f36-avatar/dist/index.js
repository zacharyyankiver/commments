'use strict';

var p = require('react');
var emotion = require('emotion');
var f36Image = require('@contentful/f36-image');
var f36Tooltip = require('@contentful/f36-tooltip');
var c = require('@contentful/f36-tokens');
var f36Core = require('@contentful/f36-core');
var f36Menu = require('@contentful/f36-menu');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var p__default = /*#__PURE__*/_interopDefault(p);
var c__default = /*#__PURE__*/_interopDefault(c);

var Z=Object.defineProperty,_=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var $=(t,r,e)=>r in t?Z(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,v=(t,r)=>{for(var e in r||(r={}))T.call(r,e)&&$(t,e,r[e]);if(I)for(var e of I(r))G.call(r,e)&&$(t,e,r[e]);return t},B=(t,r)=>_(t,U(r));var N=(t,r)=>{var e={};for(var o in t)T.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&I)for(var o of I(t))r.indexOf(o)<0&&G.call(t,o)&&(e[o]=t[o]);return e};var z={primary:c__default.default.blue500,muted:R(c__default.default.gray500),green:c__default.default.green400,orange:c__default.default.orange400,yellow:c__default.default.yellow500,purple:c__default.default.purple400,gray:c__default.default.gray500,pink:"#FF77AE",emerald:"#00B8A2",lavender:"#9095FF"};function R(t){let r=parseInt(t.slice(1,3),16),e=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return `rgb(${[Math.round((255+r)/2),Math.round((255+e)/2),Math.round((255+o)/2)].join(" ")})`}function q(t,r){return t==="user"?1:r>=48?3:2}function V(t){return ["muted","gray"].includes(t)?1:2}function w(t,r,e){return V(r)+q(t,e)}var h=t=>{var e;return (e={tiny:20,small:24,medium:32,large:48}[t])!=null?e:parseInt(t.slice(0,-2),10)};function b(t){return `${t}px`}function F(t){return t==="app"?"4px":"100%"}function L(t){return t==="app"?"1px":"100%"}var J=(t,r,e)=>{let o=z[r],i=V(r),a=w(t,r,e);return {boxShadow:[`0px 0px 0px ${i}px ${o} inset`,`0px 0px 0px ${a}px ${c__default.default.colorWhite} inset`].join(", ")}},K=t=>Math.round(t/2),j=({size:t,variant:r,colorVariant:e})=>{let o=F(r),i=L(r),a=h(t),s=w(r,e,a),n=e==="muted";return {fallback:emotion.css({backgroundColor:n?R(c__default.default.gray300):c__default.default.gray300,color:n?R(c__default.default.gray700):c__default.default.gray700,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontStretch:"semi-condensed",fontSize:b(K(a))}),image:emotion.css({borderRadius:i,display:"block","& + svg":{borderRadius:i,rect:{rx:0,ry:0}}}),root:emotion.css({borderRadius:o,height:a,width:a,overflow:"hidden",position:"relative",padding:s,"&::after":v({borderRadius:o,bottom:0,content:'""',display:"block",left:0,position:"absolute",top:0,right:0},J(r,e,a))}),imageContainer:emotion.css({backgroundColor:c__default.default.colorWhite,overflow:"visible",zIndex:1},e==="muted"&&{img:{opacity:.5}}),overlayIcon:emotion.css({svg:{backgroundColor:c__default.default.colorWhite,borderRadius:"100%",position:"absolute",bottom:0,right:"-10%",width:"40%",height:"40%",zIndex:1}})}};function et(g,l){var k=g,{alt:t="",className:r,colorVariant:e="gray",icon:o,isLoading:i=!1,size:a="medium",initials:s,src:n,testId:m="cf-ui-avatar",tooltipProps:f,variant:C="user"}=k,x=N(k,["alt","className","colorVariant","icon","isLoading","size","initials","src","testId","tooltipProps","variant"]);let X=!i&&!n,y=j({size:a,variant:C,colorVariant:e}),W=p__default.default.createElement("div",v({className:emotion.cx(y.root,r,{[y.imageContainer]:!!n}),"data-test-id":m,ref:l},x),X?p__default.default.createElement("div",{className:y.fallback,"data-test-id":`${m}-fallback`},s==null?void 0:s.substring(0,2).toUpperCase()):p__default.default.createElement(f36Image.Image,{alt:t,className:y.image,src:n,height:"100%",width:"100%"}),!!o&&p__default.default.createElement("span",{className:y.overlayIcon,"data-test-id":`${m}-icon`},o));return f?p__default.default.createElement(f36Tooltip.Tooltip,B(v({},f),{usePortal:!0}),W):W}var D=p.forwardRef(et);var O=t=>({groupSpaced:emotion.css({gap:c__default.default.spacing2Xs}),groupStacked:emotion.css({gap:0,"> :not(:first-child)":{marginLeft:`-${c__default.default.spacing2Xs}`}}),avatarStacked:emotion.css({position:"relative",boxShadow:`0px 0px 0px 1px ${c__default.default.colorWhite}`}),moreAvatarsBtn:emotion.css({cursor:"pointer",backgroundColor:c__default.default.colorWhite,color:c__default.default.gray600,fontSize:c__default.default.fontSizeS,border:"none",boxShadow:`0px 0px 0px 1px ${c__default.default.gray200} inset`,borderRadius:"99999999em",height:b(h(t)),width:b(h(t)),overflow:"hidden",zIndex:0}),moreAvatarsItem:emotion.css({cursor:"default"})});function nt({children:t,className:r,maxVisibleChildren:e=3,size:o="medium",testId:i="cf-ui-avatar-group",variant:a="spaced"},s){let n=O(o),m=p__default.default.Children.toArray(t),f=m.length>e?e-1:e,C=m.slice(0,f),x=m.slice(f);return p__default.default.createElement(f36Core.Stack,{flexDirection:"row",testId:i,ref:s,className:emotion.cx(r,{[n.groupStacked]:a==="stacked",[n.groupSpaced]:a==="spaced"})},C.map((l,g)=>{let k=C.length-g;return p__default.default.cloneElement(l,{key:`avatar-rendered-${g}`,size:o,className:emotion.cx(l.props.className,{[n.avatarStacked]:a==="stacked"}),style:{zIndex:k}})}),x.length>0&&p__default.default.createElement(f36Menu.Menu,{placement:"bottom-end"},p__default.default.createElement(f36Menu.Menu.Trigger,null,p__default.default.createElement("button",{type:"button",className:emotion.cx({[n.avatarStacked]:a==="stacked"},n.moreAvatarsBtn)},"+",x.length)),p__default.default.createElement(f36Menu.Menu.List,null,x.map((l,g)=>p__default.default.createElement(f36Menu.Menu.Item,{className:n.moreAvatarsItem,key:`avatar-${g}`},p__default.default.cloneElement(l,{key:`avatar-menuitem-${g}`,size:"tiny",tooltipProps:void 0}),l.props.alt)))))}var H=p.forwardRef(nt);

exports.Avatar = D;
exports.AvatarGroup = H;
exports.avatarColorMap = z;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map