import N, { useRef, useLayoutEffect, useEffect } from 'react';
import { Box } from '@contentful/f36-core';
import i from '@contentful/f36-tokens';
import { cx, css } from 'emotion';

var E=Object.defineProperty,L=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var y=(o,s,t)=>s in o?E(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t,h=(o,s)=>{for(var t in s||(s={}))P.call(s,t)&&y(o,t,s[t]);if(r)for(var t of r(s))g.call(s,t)&&y(o,t,s[t]);return o},c=(o,s)=>L(o,b(s));var C=(o,s)=>{var t={};for(var l in o)P.call(o,l)&&s.indexOf(l)<0&&(t[l]=o[l]);if(o!=null&&r)for(var l of r(o))s.indexOf(l)<0&&g.call(o,l)&&(t[l]=o[l]);return t};var d=({className:o})=>({collapseWrapper:cx(css({boxSizing:"border-box",overflow:"hidden"}),o)});var R=S=>{var p=S,{children:o,className:s,isExpanded:t=!1,testId:l="cf-collapse"}=p,x=C(p,["children","className","isExpanded","testId"]);let n=useRef(null),u=d({className:s}),m=useRef(!1),f=()=>{let{current:e}=n;return e?`${e.scrollHeight}px`:"0px"},a=()=>{let{current:e}=n;t?e==null||e.style.setProperty("height","auto"):(e==null||e.style.removeProperty("pointer-events"),e==null||e.style.setProperty("display","none"));};return useLayoutEffect(()=>{let{current:e}=n;m.current?(e==null||e.style.setProperty("transition",`height ${i.transitionDurationDefault} ${i.transitionEasingDefault}, padding ${i.transitionDurationDefault} ${i.transitionEasingDefault}`),requestAnimationFrame(function(){t?(e==null||e.style.setProperty("display","block"),e==null||e.style.removeProperty("pointer-events")):e==null||e.style.setProperty("pointer-events","none");let D=t?"0px":f(),H=t?f():"0px";e==null||e.style.setProperty("height",D),requestAnimationFrame(function(){e==null||e.style.setProperty("height",H);});})):(a(),m.current=!0);},[t]),useEffect(()=>{let{current:e}=n;return e==null||e.addEventListener("transitionend",a),()=>{e==null||e.removeEventListener("transitionend",a);}},[t]),N.createElement(Box,c(h({},x),{testId:l,role:"region","aria-hidden":!t,className:u.collapseWrapper,ref:n}),o)};

export { R as Collapse };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map