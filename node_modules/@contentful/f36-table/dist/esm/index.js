import { cx, css } from 'emotion';
import u, { createContext, forwardRef, useContext, useState, useMemo } from 'react';
import { Box } from '@contentful/f36-core';
import a from '@contentful/f36-tokens';
import { Caption, Text } from '@contentful/f36-typography';
import { SortIcon, SortAscendingIcon, SortDescendingIcon } from '@contentful/f36-icons';
import { getTextFromChildren } from '@contentful/f36-utils';

var pe=Object.defineProperty,ie=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var L=(e,o,t)=>o in e?pe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,n=(e,o)=>{for(var t in o||(o={}))A.call(o,t)&&L(e,t,o[t]);if(C)for(var t of C(o))O.call(o,t)&&L(e,t,o[t]);return e},s=(e,o)=>ie(e,de(o));var d=(e,o)=>{var t={};for(var r in e)A.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&C)for(var r of C(e))o.indexOf(r)<0&&O.call(e,r)&&(t[r]=e[r]);return t};var $=()=>({inline:css({borderRadius:a.borderRadiusMedium,boxShadow:`0 0 0 1px ${a.gray200}`,"th:first-child":{borderTopLeftRadius:a.borderRadiusMedium},"th:last-child":{borderTopRightRadius:a.borderRadiusMedium},"tr:last-child td:first-child":{borderBottomLeftRadius:a.borderRadiusMedium},"tr:last-child td:last-child":{borderBottomRightRadius:a.borderRadiusMedium}}),embedded:css({borderBottom:`1px solid ${a.gray200}`}),root:css({width:"100%"})});var z=createContext({}),F=()=>useContext(z),G=z.Provider;var H=forwardRef((b,p)=>{var i=b,{children:e,className:o,layout:t="inline",testId:r="cf-ui-table",verticalAlign:l="top"}=i,m=d(i,["children","className","layout","testId","verticalAlign"]);let T=$();return u.createElement(Box,s(n({cellPadding:"0",cellSpacing:"0"},m),{as:"table",display:"table",ref:p,className:cx(T.root,T[t],o),testId:r}),u.createElement(G,{value:{verticalAlign:l}},e))});H.displayName="Table";function D(m,l){var p=m,{className:e,children:o,testId:t="cf-ui-table-body"}=p,r=d(p,["className","children","testId"]);return u.createElement(Box,s(n({},r),{as:"tbody",className:e,ref:l,testId:t}),o)}D.displayName="TableBody";var B=forwardRef(D);var g={body:{name:"body",as:"td",offsetTop:0},head:{name:"head",as:"th",offsetTop:0}},I=createContext(g.body),E=()=>useContext(I),M=I.Provider;var V=({align:e,isSortable:o,isTableHead:t,verticalAlign:r})=>({button:css({alignItems:"flex-start",appearance:"none",background:"none",border:0,color:"inherit",cursor:"pointer",display:"inline-flex",gap:a.spacing2Xs,outline:0,padding:a.spacingS,"&:focus":{backgroundColor:a.gray100,boxShadow:a.glowPrimary},"&:focus:not(:focus-visible)":{backgroundColor:"unset",boxShadow:"unset"},"&:focus-visible":{backgroundColor:a.gray100,boxShadow:a.glowPrimary}}),container:css({backgroundColor:a.colorWhite,borderBottom:`1px solid ${a.gray200}`,padding:o?0:a.spacingS,textAlign:e,color:t?a.gray600:a.gray700,fontWeight:t?a.fontWeightMedium:a.fontWeightNormal,verticalAlign:r}),sortIcon:l=>css({fill:a.gray400,opacity:l?1:0,transition:`opacity ${a.transitionEasingCubicBezier} ${a.transitionDurationDefault}`})});var X=(t=>(t.Ascending="ascending",t.Descending="descending",t))(X||{}),ve={ascending:SortAscendingIcon,descending:SortDescendingIcon};function j(T,i){var f=T,{align:e="left",children:o,className:t,isSortable:r,sortDirection:l,testId:m="cf-ui-table-cell",sortButtonAriaLabel:p}=f,b=d(f,["align","children","className","isSortable","sortDirection","testId","sortButtonAriaLabel"]);let[k,x]=useState(!1),{as:ee,name:oe,offsetTop:te}=E(),{verticalAlign:re}=F(),le=ve[l],S=oe==="head",R=V({isSortable:S?r:void 0,isTableHead:S,align:e,verticalAlign:re}),ae=S?Caption:Text,ne=r?{"aria-sort":l!=null?l:"none",onBlur:()=>x(!1),onFocus:()=>x(!0),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)}:{},se=useMemo(()=>getTextFromChildren(o),[o]),W=o;return r&&(W=u.createElement("button",{"aria-label":p!=null?p:`Sort ${l==="ascending"?"descending":"ascending"} by ${se}`,className:R.button,type:"button"},o,l?u.createElement(le,{size:"tiny",variant:"secondary"}):u.createElement(SortIcon,{"aria-hidden":!k,className:R.sortIcon(k),size:"tiny",variant:"secondary"}))),u.createElement(ae,s(n(n({},b),ne),{as:ee,className:cx(R.container,t),ref:i,style:s(n({},b.style),{top:te||void 0}),testId:m}),W)}j.displayName="TableCell";var N=forwardRef(j);var K=()=>({root:css({color:a.gray600}),sticky:css({th:{position:"sticky",top:0,zIndex:a.zIndexDefault}})});var P=forwardRef((b,p)=>{var i=b,{children:e,className:o,isSticky:t=!1,offsetTop:r,testId:l="cf-ui-table-head"}=i,m=d(i,["children","className","isSticky","offsetTop","testId"]);let T=K(),f=cx(T.root,t&&T.sticky,o);return u.createElement(M,{value:s(n({},g.head),{offsetTop:r||0})},u.createElement(Box,s(n({},m),{as:"thead",className:f,ref:p,testId:l}),e))});P.displayName="TableHead";var Z=()=>({root:css({"&:last-child td":{borderBottom:"none"},"&:hover td":{backgroundColor:a.gray100}}),selected:css({"td, th":{backgroundColor:a.gray100}})});var h=forwardRef((p,m)=>{var b=p,{className:e,children:o,isSelected:t=!1,testId:r="cf-ui-table-row"}=b,l=d(b,["className","children","isSelected","testId"]);let i=Z();return u.createElement(Box,s(n({},l),{as:"tr",className:cx(i.root,{[i.selected]:t},e),ref:m,testId:r}),o)});h.displayName="TableRow";var y=H;y.Row=h;y.Head=P;y.Cell=N;y.Body=B;

export { y as Table, B as TableBody, N as TableCell, I as TableCellContext, M as TableCellContextProvider, X as TableCellSorting, P as TableHead, h as TableRow, g as contextOptions, E as useTableCellContext };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map