{"version":3,"sources":["../src/Notification.tsx","../src/NotificationsManager/NotificationsManager.tsx","../src/NotificationsManager/useAsyncState.ts","../src/NotificationItem/NotificationItem.tsx","../src/NotificationItem/NotificationItem.styles.ts","../src/NotificationItem/NotificationItemContainer.tsx","../src/NotificationsManager/NotificationsManager.styles.ts"],"names":["React","render","useCallback","useState","cx","useRef","useAsyncState","value","ref","forceUpdate","newState","state","CheckCircleIcon","ErrorCircleIcon","WarningIcon","CloseIcon","InfoCircleIcon","Button","TextLink","Flex","Box","Heading","Paragraph","css","tokens","variantColors","getWrapperStyle","variant","getIconStyle","getStyles","_NotificationItem","props","_b","_a","className","children","cta","withCloseButton","closeButtonAriaLabel","onClose","testId","title","otherProps","__objRest","styles","iconSize","iconVariants","__spreadProps","__spreadValues","NotificationItem","Component","AnimateHeight","defaultProps","NotificationItemContainer","prevProps","isShown","duration","placement","placementOffset","uniqueId","getUniqueId","NotificationsManager","register","items","setItems","setPlacementState","setPlacementOffset","setDuration","setPlacement","params","close","id","item","closeAndDelete","closeAll","show","text","settings","itemDuration","withClose","notificationId","notification","alreadyThere","initiated","internalAPI","registerAPI","fnName","fn","createRoot","callback","container","afterInit","args","resolve","Notification"],"mappings":"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","sourcesContent":["/* global Promise */\n\nimport React from 'react';\nimport { render } from 'react-dom';\nimport {\n  NotificationsManager,\n  ShowAction,\n  CloseAction,\n  CloseAllAction,\n  SetPlacementAction,\n  SetDurationAction,\n  NotificationProps,\n  Placement,\n} from './NotificationsManager';\nimport type { NotificationVariant, NotificationCta } from './types';\n\nexport interface NotificationsAPI {\n  success: ShowAction<Notification>;\n  error: ShowAction<Notification>;\n  show: ShowAction<Notification>;\n  close: CloseAction<void>;\n  closeAll: CloseAllAction<void>;\n  setPlacement: SetPlacementAction<void>;\n  setDuration: SetDurationAction<void>;\n}\n\nlet initiated = false;\nconst internalAPI: Partial<NotificationsAPI> = {};\n\nfunction registerAPI(fnName: string, fn: Function) {\n  internalAPI[fnName] = fn;\n}\n\nfunction createRoot(callback: () => void) {\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n\n  render(<NotificationsManager register={registerAPI} />, container, callback);\n}\n\nfunction afterInit<PromiseValueType>(fn: Function) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return (...args: any[]) => {\n    if (!initiated) {\n      initiated = true;\n      return new Promise<PromiseValueType>((resolve) => {\n        createRoot(() => {\n          resolve(fn(...args));\n        });\n      });\n    } else {\n      return Promise.resolve<PromiseValueType>(fn(...args));\n    }\n  };\n}\n\nconst show =\n  (variant: NotificationVariant) =>\n  (\n    text: string,\n    settings?: {\n      duration?: number;\n      withClose?: boolean;\n      id?: string;\n      title?: string;\n      cta?: Partial<NotificationCta>;\n    },\n  ) => {\n    if (internalAPI.show) {\n      return internalAPI.show(text, {\n        ...(settings || {}),\n        variant,\n      });\n    }\n  };\n\ntype ExternalShowAction<T> = (\n  text: string,\n  settings?: {\n    duration?: number;\n    withClose?: boolean;\n    id?: string;\n    title?: string;\n    cta?: Partial<NotificationCta>;\n  },\n) => T;\n\nexport const Notification: {\n  success: ExternalShowAction<Promise<NotificationProps>>;\n  error: ExternalShowAction<Promise<NotificationProps>>;\n  warning: ExternalShowAction<Promise<NotificationProps>>;\n  info: ExternalShowAction<Promise<NotificationProps>>;\n  close: CloseAction<Promise<void>>;\n  closeAll: CloseAllAction<Promise<void>>;\n  setPlacement: SetPlacementAction<Promise<void>>;\n  setDuration: SetDurationAction<Promise<void>>;\n} = {\n  success: afterInit<NotificationProps>(show('positive')),\n  error: afterInit<NotificationProps>(show('negative')),\n  warning: afterInit<NotificationProps>(show('warning')),\n  info: afterInit<NotificationProps>(show('primary')),\n  close: afterInit<void>((id: string | number) => {\n    if (internalAPI.close) {\n      return internalAPI.close(id);\n    }\n  }),\n  closeAll: afterInit<void>(() => {\n    if (internalAPI.closeAll) {\n      return internalAPI.closeAll();\n    }\n  }),\n  setPlacement: afterInit<void>(\n    (placement: Placement, params?: { offset: number }) => {\n      if (internalAPI.setPlacement) {\n        return internalAPI.setPlacement(placement, params);\n      }\n    },\n  ),\n  setDuration: afterInit<void>((duration: number) => {\n    if (internalAPI.setDuration) {\n      return internalAPI.setDuration(duration);\n    }\n  }),\n};\n","import React, { useCallback, useState } from 'react';\nimport { cx } from 'emotion';\n\nimport { useAsyncState } from './useAsyncState';\nimport type { NotificationCta, NotificationVariant } from '../types';\nimport { NotificationItemContainer } from '../NotificationItem';\nimport { getStyles } from './NotificationsManager.styles';\n\nexport type Placement = 'top' | 'bottom';\n\nexport interface NotificationProps {\n  id: string | number;\n  text: string;\n  onClose: Function;\n  duration?: number;\n  withClose: boolean;\n  isShown: boolean;\n  variant: NotificationVariant;\n  title?: string;\n  cta?: Partial<NotificationCta>;\n}\n\nexport type ShowAction<T> = (\n  text: string,\n  setting?: {\n    variant: NotificationVariant;\n    id?: string;\n    duration?: number;\n    withClose?: boolean;\n    title?: string;\n    cta?: Partial<NotificationCta>;\n  },\n) => T;\n\nexport type CloseAction<T> = (id: string | number) => T;\n\nexport type CloseAllAction<T> = () => T;\n\nexport type SetDurationAction<T> = (duration: number) => T;\n\nexport type SetPlacementAction<T> = (\n  placement: Placement,\n  params?: { offset: number },\n) => T;\n\nexport interface NotificationsManagerProps {\n  register: (name: string, callback: Function) => void;\n}\n\nlet uniqueId = 0;\n\nconst getUniqueId = (): number => {\n  uniqueId += 1;\n  return uniqueId;\n};\n\nexport const NotificationsManager = ({\n  register,\n}: NotificationsManagerProps): React.ReactElement => {\n  const [items, setItems] = useAsyncState<NotificationProps[]>([]);\n  const [placement, setPlacementState] = useState('bottom');\n  const [placementOffset, setPlacementOffset] = useState(20);\n  const [duration, setDuration] = useState(6000);\n  const styles = getStyles(placement, placementOffset);\n\n  const setPlacement: SetPlacementAction<void> = useCallback(\n    (placement, params?: { offset: number }) => {\n      if (placement === 'bottom' || placement === 'top') {\n        const placementOffset = params && params.offset ? params.offset : 20;\n        setPlacementState(placement);\n        setPlacementOffset(placementOffset);\n      }\n    },\n    [],\n  );\n\n  const close: CloseAction<void> = useCallback(\n    (id) => {\n      setItems(\n        items.current.map((item) => {\n          if (item.id !== id) {\n            return item;\n          }\n\n          return {\n            ...item,\n            isShown: false,\n          };\n        }),\n      );\n    },\n    [items, setItems],\n  );\n\n  const closeAndDelete = useCallback(\n    (id: string | number) => {\n      setItems(items.current.filter((item) => item.id !== id));\n    },\n    [items, setItems],\n  );\n\n  const closeAll: CloseAllAction<void> = useCallback(() => {\n    setItems(\n      items.current.map((item) => {\n        return {\n          ...item,\n          isShown: false,\n        };\n      }),\n    );\n  }, [items, setItems]);\n\n  const show: ShowAction<NotificationProps> = useCallback(\n    (text, settings) => {\n      const itemDuration =\n        settings && typeof settings.duration !== 'undefined' // Needed as 0 is falsy but 0 is valid to disable auto-closing a notification\n          ? settings.duration\n          : duration;\n      const variant = settings?.variant ? settings.variant : 'positive';\n\n      const withClose =\n        settings && typeof settings.withClose !== 'undefined'\n          ? settings.withClose\n          : true;\n\n      const notificationId = settings?.id ? settings.id : getUniqueId();\n\n      const notification = {\n        id: notificationId,\n        text,\n        onClose: () => closeAndDelete(notificationId),\n        duration: itemDuration,\n        withClose,\n        isShown: true,\n        variant,\n        title: settings?.title,\n        cta: settings?.cta,\n      };\n\n      const alreadyThere = items.current.find(\n        (item) => item.id === notification.id,\n      );\n\n      if (alreadyThere) {\n        return alreadyThere;\n      }\n\n      if (placement === 'top') {\n        setItems([notification, ...items.current]);\n      } else {\n        setItems([...items.current, notification]);\n      }\n\n      return notification;\n    },\n    [closeAndDelete, duration, items, placement, setItems],\n  );\n\n  register('close', close);\n  register('show', show);\n  register('closeAll', closeAll);\n  register('setPlacement', setPlacement);\n  register('setDuration', setDuration);\n\n  return (\n    <div\n      data-test-id=\"cf-notification-container\"\n      className={cx(styles.manager)}\n    >\n      <div className={cx(styles.container)}>\n        {items.current.map((item) => (\n          <NotificationItemContainer\n            variant={item.variant}\n            duration={item.duration}\n            key={item.id}\n            withCloseButton={item.withClose}\n            // eslint-disable-next-line react/jsx-handler-names\n            onClose={item.onClose}\n            isShown={item.isShown}\n            title={item.title}\n            cta={item.cta}\n          >\n            {item.text}\n          </NotificationItemContainer>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nNotificationsManager.displayName = 'NotificationsManager';\n","import { useRef, useState } from 'react';\n\n/**\n * An asyncronous state hook.\n *\n * Think of it as a slight modification of React's `useState` hook, where the\n * state returned is instead a `MutableRefObject` like you know it from the\n * `useRef` hook.\n *\n * @param value\n * @returns A tuple with the `MutableRefObject` and a function to set the state\n */\nexport function useAsyncState<ValueType>(\n  value: ValueType,\n): [React.MutableRefObject<ValueType>, (state: ValueType) => void] {\n  const ref = useRef<ValueType>(value);\n  const [, forceUpdate] = useState(false);\n\n  const setState = (newState: ValueType) => {\n    if (!Object.is(ref.current, newState)) {\n      ref.current = newState;\n      forceUpdate((state) => !state);\n    }\n  };\n\n  return [ref, setState];\n}\n","import React from 'react';\nimport { cx } from 'emotion';\nimport {\n  CheckCircleIcon,\n  ErrorCircleIcon,\n  WarningIcon,\n  CloseIcon,\n  InfoCircleIcon,\n} from '@contentful/f36-icons';\nimport { Button } from '@contentful/f36-button';\nimport { TextLink } from '@contentful/f36-text-link';\nimport {\n  Flex,\n  Box,\n  type ExpandProps,\n  type CommonProps,\n} from '@contentful/f36-core';\nimport { Heading, Paragraph } from '@contentful/f36-typography';\n\nimport type { NotificationVariant, NotificationCta } from '../types';\nimport { getStyles } from './NotificationItem.styles';\n\nexport interface NotificationItemProps extends CommonProps {\n  /**\n   * Defines the styling of notification\n   * @default positive\n   */\n  variant?: NotificationVariant;\n  /**\n   * Defines if the close button should be rendered\n   * @default true\n   */\n  withCloseButton?: boolean;\n  /**\n   * Aria label for close button\n   * @default 'Dismiss'\n   */\n  closeButtonAriaLabel?: string;\n  /**\n   * Function that will be triggered when close button is clicked\n   */\n  onClose?: Function;\n  /**\n   * Title of the notification\n   */\n  title?: string;\n  /**\n   * Content of the notification\n   */\n  children: React.ReactNode;\n  /**\n   * Label and text-link props of the CTA\n   */\n  cta?: Partial<NotificationCta>;\n}\n\nconst _NotificationItem = (props: ExpandProps<NotificationItemProps>, ref) => {\n  const {\n    className,\n    children,\n    cta,\n    withCloseButton = true,\n    closeButtonAriaLabel = 'Dismiss',\n    variant = 'positive',\n    onClose,\n    testId = 'cf-ui-notification',\n    title,\n    ...otherProps\n  } = props;\n\n  const styles = getStyles({ variant });\n\n  const iconSize = title ? 'medium' : 'small';\n  const iconVariants = {\n    positive: <CheckCircleIcon variant={variant} size={iconSize} />,\n    warning: <WarningIcon variant={variant} size={iconSize} />,\n    negative: <ErrorCircleIcon variant={variant} size={iconSize} />,\n    primary: <InfoCircleIcon variant={variant} size={iconSize} />,\n  };\n\n  const intents = {\n    positive: 'success',\n    warning: 'warning',\n    negative: 'error',\n    primary: 'info',\n  };\n\n  return (\n    <Flex\n      data-test-id={testId}\n      role=\"alert\"\n      data-intent={intents[variant]}\n      aria-live={variant === 'positive' ? 'polite' : 'assertive'}\n      className={cx(styles.wrapper, className)}\n      {...otherProps}\n      ref={ref}\n    >\n      <Box className={cx(styles.icon)}>{iconVariants[variant]}</Box>\n      <Box className={cx(styles.notification)}>\n        {title && (\n          <Heading\n            as=\"h2\"\n            className={cx(styles.title)}\n            marginBottom=\"spacingXs\"\n          >\n            {title}\n          </Heading>\n        )}\n        {children && (\n          <Paragraph className={styles.content} marginBottom=\"spacingXs\">\n            {children}\n          </Paragraph>\n        )}\n        {cta?.label && (\n          <TextLink\n            {...cta?.textLinkProps}\n            as={cta?.textLinkProps?.as || 'button'}\n          >\n            {cta.label}\n          </TextLink>\n        )}\n      </Box>\n      {withCloseButton && (\n        <Box>\n          <Button\n            className={cx(styles.closeButton)}\n            variant=\"transparent\"\n            startIcon={<CloseIcon />}\n            onClick={() => {\n              onClose && onClose();\n            }}\n            testId=\"cf-ui-notification-close\"\n            aria-label={closeButtonAriaLabel}\n          />\n        </Box>\n      )}\n    </Flex>\n  );\n};\n\nexport const NotificationItem = React.forwardRef(_NotificationItem);\n","import { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\nimport type { NotificationVariant } from '../types';\n\nconst variantColors = {\n  positive: tokens.green600,\n  negative: tokens.red600,\n  warning: tokens.orange400,\n  primary: tokens.blue600,\n};\n\nconst getWrapperStyle = ({ variant }) =>\n  css({\n    background: tokens.colorWhite,\n    borderRadius: tokens.borderRadiusMedium,\n    boxShadow: tokens.boxShadowHeavy,\n    boxSizing: 'border-box',\n    display: 'flex',\n    overflow: 'hidden',\n    position: 'relative',\n    padding: tokens.spacingM,\n    width: '100%',\n    '&:before': {\n      backgroundColor: variantColors[variant],\n      content: '\"\"',\n      height: '100%',\n      left: 0,\n      position: 'absolute',\n      top: 0,\n      width: '2px',\n    },\n  });\n\nconst getIconStyle = ({ variant }) =>\n  css({\n    fill: variantColors[variant],\n    marginRight: tokens.spacingM,\n    alignItems: 'flex-start',\n  });\n\nexport const getStyles = ({ variant }: { variant: NotificationVariant }) => ({\n  wrapper: getWrapperStyle({ variant }),\n  icon: getIconStyle({ variant }),\n  notification: css({\n    fontSize: tokens.fontSizeM,\n    lineHeight: tokens.lineHeightM,\n    width: '100%',\n  }),\n  title: css({\n    color: tokens.gray800,\n    fontSize: tokens.fontSizeL,\n    lineHeight: tokens.lineHeightL,\n  }),\n  content: css({\n    color: tokens.gray700,\n    wordBreak: 'break-word',\n    hyphens: 'auto',\n    '&:last-child': {\n      marginBottom: 0,\n    },\n  }),\n  closeButton: css({\n    marginBottom: `-${tokens.spacingXs}`,\n    marginRight: `-${tokens.spacingXs}`,\n    marginTop: `-${tokens.spacingXs}`,\n  }),\n});\n","import React, { Component } from 'react';\nimport AnimateHeight from 'react-animate-height';\n\nimport { NotificationItem, NotificationItemProps } from './NotificationItem';\nimport { cx, css } from 'emotion';\n\nexport interface NotificationItemContainerProps extends NotificationItemProps {\n  duration?: number;\n  isShown?: boolean;\n}\n\nexport interface NotificationItemContainerState {\n  isShown: boolean;\n}\n\nconst defaultProps: Partial<NotificationItemContainerProps> = {\n  isShown: false,\n};\n\nexport class NotificationItemContainer extends Component<\n  NotificationItemContainerProps,\n  NotificationItemContainerState\n> {\n  static defaultProps = defaultProps;\n  displayName: 'NotificationItemContainer';\n\n  timer: number | null = null;\n\n  state = {\n    isShown: false,\n  };\n\n  componentDidMount() {\n    this.startTimer();\n    this.setState({ isShown: true });\n  }\n\n  componentDidUpdate(prevProps: NotificationItemContainerProps) {\n    if (prevProps.isShown !== this.props.isShown) {\n      this.setState({\n        isShown: this.props.isShown!, // eslint-disable-line @typescript-eslint/no-non-null-assertion\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopTimer();\n  }\n\n  startTimer = () => {\n    if (this.props.duration) {\n      if (this.props.duration === 0) return;\n\n      this.timer = window.setTimeout(() => {\n        this.handleClose();\n      }, this.props.duration);\n    }\n  };\n\n  stopTimer = () => {\n    if (this.props.duration === 0) return;\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  };\n\n  handleClose = () => {\n    this.stopTimer();\n    this.setState({ isShown: false });\n  };\n\n  handleMouseEnter = () => {\n    this.stopTimer();\n  };\n\n  handleMouseLeave = () => {\n    this.startTimer();\n  };\n\n  render() {\n    const { isShown, duration, ...otherProps } = this.props;\n    return (\n      <AnimateHeight\n        duration={200}\n        height={this.state.isShown ? 'auto' : 0}\n        easing=\"ease-in-out\"\n        animateOpacity\n        onHeightAnimationEnd={() => {\n          if (this.state.isShown === false) {\n            if (this.props.onClose) {\n              this.props.onClose();\n            }\n          }\n        }}\n      >\n        <div\n          className={cx(css({ pointerEvents: 'all' }))}\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n        >\n          <NotificationItem {...otherProps} onClose={this.handleClose} />\n        </div>\n      </AnimateHeight>\n    );\n  }\n}\n","import { css } from 'emotion';\nimport tokens from '@contentful/f36-tokens';\n\nexport const getStyles = (placement, placementOffset) => ({\n  manager: css({\n    left: 0,\n    margin: '0 auto',\n    maxWidth: '560px',\n    position: 'fixed',\n    pointerEvents: 'none',\n    right: 0,\n    [placement]: placementOffset,\n    zIndex: tokens.zIndexNotification,\n  }),\n  container: css({\n    display: 'flex',\n    flexDirection: 'column',\n    margin: '0 auto',\n    maxWidth: '560px',\n    minWidth: '360px',\n    '& > div': {\n      marginBottom: placement === 'top' ? 0 : tokens.spacingS,\n      marginTop: placement === 'top' ? tokens.spacingS : 0,\n    },\n  }),\n});\n"]}