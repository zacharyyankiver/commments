import a, { useState, useRef, useEffect } from 'react';
import { usePopper } from 'react-popper';
import { cx, css } from 'emotion';
import i from '@contentful/f36-tokens';
import { Portal } from '@contentful/f36-utils';
import { useId, Box } from '@contentful/f36-core';

var se=Object.defineProperty;var d=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var L=(t,o,e)=>o in t?se(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,y=(t,o)=>{for(var e in o||(o={}))H.call(o,e)&&L(t,e,o[e]);if(d)for(var e of d(o))K.call(o,e)&&L(t,e,o[e]);return t};var V=(t,o)=>{var e={};for(var n in t)H.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&d)for(var n of d(t))o.indexOf(n)<0&&K.call(t,n)&&(e[n]=t[n]);return e};var j=(t,o,e)=>new Promise((n,u)=>{var h=s=>{try{l(e.next(s));}catch(p){u(p);}},b=s=>{try{l(e.throw(s));}catch(p){u(p);}},l=s=>s.done?n(s.value):Promise.resolve(s.value).then(h,b);l((e=e.apply(t,o)).next());});var g=`calc(-1 * ((1rem * (10 / ${i.fontBaseDefault})) / 2))`,X=`calc(1rem * (10 / ${i.fontBaseDefault}))`;function q(){return {tooltipTargetWrapper:css({display:"inline-block",position:"relative"}),tooltip:css({background:i.gray900,fontFamily:i.fontStackPrimary,fontSize:i.fontSizeS,fontWeight:i.fontWeightNormal,fontStyle:"normal",textDecoration:"none",color:i.colorWhite,textAlign:"center",lineHeight:i.lineHeightM,padding:`${i.spacingXs} calc(1rem * (10 / ${i.fontBaseDefault}))`,borderRadius:i.borderRadiusMedium,whiteSpace:"normal",textTransform:"initial",letterSpacing:"initial"}),tooltipHidden:css({visibility:"hidden",pointerEvents:"none",zIndex:i.zIndexNegative}),tooltipContainer:css({"& > button[disabled]":{pointerEvents:"none"}}),tooltipArrow:css({position:"absolute",'&[data-placement*="top"]':{bottom:0,left:0,marginBottom:g},'&[data-placement*="right"]':{left:0,marginLeft:g},'&[data-placement*="bottom"]':{left:0,top:0,marginTop:g},'&[data-placement*="left"]':{right:0,marginRight:g},"&::before":{content:'""',display:"block",height:X,width:X,backgroundColor:i.gray900,transform:"rotate3d(0, 0, 1, 45deg)",zIndex:i.zIndexNegative}})}}var ce=ue=>{var N=ue,{children:t,className:o,as:e="span",content:n,label:u,id:h,isVisible:b=!1,hideDelay:l=0,onBlur:s,onFocus:p,onMouseLeave:M,onMouseOver:C,onKeyDown:R,showDelay:U=375,targetWrapperClassName:I,maxWidth:E=360,testId:Y="cf-ui-tooltip",placement:Z="auto",usePortal:_=!1,isDisabled:ee=!1}=N,te=V(N,["children","className","as","content","label","id","isVisible","hideDelay","onBlur","onFocus","onMouseLeave","onMouseOver","onKeyDown","showDelay","targetWrapperClassName","maxWidth","testId","placement","usePortal","isDisabled"]);let T=q(),[oe,f]=useState(b),z=useId(h,"tooltip"),B=useRef(null),W=useRef(null),[ne,re]=useState(null),{styles:k,attributes:x,update:P}=usePopper(B.current,W.current,{placement:Z,modifiers:[{name:"arrow",options:{element:ne,padding:parseFloat(i.borderRadiusSmall)}},{name:"offset",options:{offset:[0,10]}}]});useEffect(()=>{(()=>j(void 0,null,function*(){P!==null&&(yield P());}))();},[n,P]);let D=useRef(),F=useRef(),m=()=>{clearTimeout(D.current),clearTimeout(F.current);};useEffect(()=>m,[]);let $=()=>{m(),D.current=setTimeout(()=>f(!0),U);},S=()=>{m(),F.current=setTimeout(()=>f(!1),l);},ie=typeof E=="string"?E:`${E}px`,ae=y({zIndex:i.zIndexTooltip,maxWidth:ie},k.popper);if(!n||ee)return a.createElement(Box,{as:e,className:I},t);let A=a.createElement(Box,y({as:"span",id:z,ref:W,role:"tooltip",style:ae,className:cx(T.tooltip,o),testId:Y,onMouseEnter:()=>{m(),f(!0);},onMouseLeave:()=>{m(),f(!1);}},x.popper),a.createElement("span",{"aria-label":u},n),a.createElement("span",{className:T.tooltipArrow,"data-placement":x.popper&&x.popper["data-popper-placement"],ref:re,style:k.arrow}));return a.createElement(a.Fragment,null,oe?a.createElement(a.Fragment,null,_?a.createElement(Portal,null,A):A):null,a.createElement(Box,y({as:e,ref:B,className:cx(T.tooltipContainer,I),onMouseEnter:r=>{$(),C&&C(r);},onMouseLeave:r=>{S(),M&&M(r);},onFocus:r=>{$(),p&&p(r);},onBlur:r=>{S(),s&&s(r);},onKeyDown:r=>{r.key==="Escape"&&S(),R&&R(r);}},te),a.Children.map(t,r=>{if(a.isValidElement(r))return a.cloneElement(r,{"aria-describedby":z})})))};

export { ce as Tooltip };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map