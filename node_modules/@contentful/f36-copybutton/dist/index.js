'use strict';

var d = require('react');
var f36Icons = require('@contentful/f36-icons');
var f36Tooltip = require('@contentful/f36-tooltip');
var f36Button = require('@contentful/f36-button');
var emotion = require('emotion');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var d__default = /*#__PURE__*/_interopDefault(d);

var L=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var E=(t,o,e)=>o in t?L(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))h.call(o,e)&&E(t,e,o[e]);if(m)for(var e of m(o))g.call(o,e)&&E(t,e,o[e]);return t},C=(t,o)=>F(t,N(o));var w=(t,o)=>{var e={};for(var n in t)h.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&g.call(t,n)&&(e[n]=t[n]);return e};var T=(t,o,e)=>new Promise((n,s)=>{var i=r=>{try{a(e.next(r));}catch(c){s(c);}},l=r=>{try{a(e.throw(r));}catch(c){s(c);}},a=r=>r.done?n(r.value):Promise.resolve(r.value).then(i,l);a((e=e.apply(t,o)).next());});var H=({size:t})=>{let o=t==="small"?"32px":"40px";return {button:emotion.css({height:o,minWidth:"auto",width:o})}};function k(A,z){var P=A,{className:t,isDisabled:o=!1,isLoading:e=!1,label:n,onBlur:s,onCopy:i,size:l="medium",testId:a="cf-ui-copy-button",tooltipCopiedText:r="Value copied to clipboard",tooltipProps:c,tooltipText:B="Copy to clipboard",value:u}=P,M=w(P,["className","isDisabled","isLoading","label","onBlur","onCopy","size","testId","tooltipCopiedText","tooltipProps","tooltipText","value"]);let I=H({size:l}),[y,b]=d.useState(!1),S=d.useCallback(()=>T(this,null,function*(){try{yield window.navigator.clipboard.writeText(u);}catch(v){let p=document.createElement("input");p.style.display="none",document.body.appendChild(p),p.value=u,p.focus(),p.select();let x=document.execCommand("copy");if(x==="unsuccessful")throw new Error("Unable to copy value",{cause:x});p.remove();return}i==null||i(u),b(!0);}),[i,u]),D=v=>{y&&b(!1),s==null||s(v);};return d__default.default.createElement(f36Tooltip.Tooltip,C(f({content:y?r:B},c),{isDisabled:o}),d__default.default.createElement(f36Button.Button,C(f({"aria-label":y?r:n!=null?n:B,"aria-live":"assertive",className:emotion.cx(I.button,t),isDisabled:e||o,isLoading:e,onBlur:D,testId:a,startIcon:d__default.default.createElement(f36Icons.CopyIcon,{variant:"muted",size:l==="small"?"tiny":"small"}),variant:"secondary"},M),{onClick:S,ref:z})))}k.displayName="CopyButton";var q=d__default.default.forwardRef(k);

exports.CopyButton = q;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map